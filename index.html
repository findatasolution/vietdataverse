<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <title>Viet Dataverse | Tải Dữ Liệu Kinh Tế Vĩ Mô Miễn Phí | Download Vietnam Historical Index</title> -->
    <title>Viet Dataverse | Dữ Liệu Kinh Tế Mở</title>
    <meta name="description" content="Tải lịch sử giá vàng từ 2015 miễn phí. Download Vietnam historical gold price data, silver price, interest rate export free.">
    <meta name="keywords" content="vietdataverse, viet dataverse, VietDataverse, tải lịch sử giá vàng, download vietnam historical gold price, tải giá vàng, download gold price, lịch sử giá vàng sjc, vietnam gold price data, giá vàng, historical gold price vietnam, tải giá vàng miễn phí, free gold price data, vàng doji, gold price api vietnam, giá vàng export, download silver price vietnam, tải lịch sử giá bạc, tải lãi suất liên ngân hàng, lãi suất gửi tiết kiệm, lịch sử, dữ liệu miễn phí, free macro economic index">
    <meta name="author" content="Viet Dataverse">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="language" content="Vietnamese">
    <meta name="geo.region" content="VN">
    <meta name="geo.placename" content="Vietnam">
    <!-- Favicon and Icons (hosted on imagekit.io) -->
    <link rel="icon" type="image/png" sizes="16x16" href="https://ik.imagekit.io/o2u9hny2s/vietdataverse/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://ik.imagekit.io/o2u9hny2s/vietdataverse/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://ik.imagekit.io/o2u9hny2s/vietdataverse/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="https://ik.imagekit.io/o2u9hny2s/vietdataverse/icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="https://ik.imagekit.io/o2u9hny2s/vietdataverse/icon-512.png">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#C9A55B">
    <meta name="msapplication-TileColor" content="#C9A55B">
    <meta name="msapplication-TileImage" content="https://ik.imagekit.io/o2u9hny2s/vietdataverse/icon-512.png">

    <link rel="canonical" href="https://vietdataverse.online/">
    <link rel="alternate" hreflang="vi" href="https://vietdataverse.online/">
    <link rel="alternate" hreflang="en" href="https://vietdataverse.online/">
    <link rel="alternate" hreflang="x-default" href="https://vietdataverse.online/">

    <!-- Open Graph for social sharing -->
    <meta property="og:site_name" content="Viet Dataverse">
    <meta property="og:title" content="Tải Lịch Sử Giá Vàng Việt Nam Miễn Phí | Download Vietnam Gold Price Data">
    <meta property="og:description" content="Download Vietnam historical gold price CSV miễn phí từ 2015. Tải lịch sử giá vàng SJC, DOJI, PNJ, giá bạc Phú Quý, lãi suất ngân hàng. API & export.">
    <meta property="og:image" content="https://ik.imagekit.io/o2u9hny2s/vietdataverse/V2.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Viet Dataverse - Vietnam Economic Data Platform">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://vietdataverse.online/">
    <meta property="og:locale" content="vi_VN">
    <meta property="og:locale:alternate" content="en_US">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@VietDataverse">
    <meta name="twitter:creator" content="@VietDataverse">
    <meta name="twitter:title" content="Tải Lịch Sử Giá Vàng Vietnam | Download Historical Gold Price CSV">
    <meta name="twitter:description" content="Download Vietnam historical gold price data CSV free. Tải lịch sử giá vàng SJC, DOJI từ 2015. API & export miễn phí.">
    <meta name="twitter:image" content="https://ik.imagekit.io/o2u9hny2s/vietdataverse/V2.png">
    <meta name="twitter:image:alt" content="Viet Dataverse Logo">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-B9BHYSYDES"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-B9BHYSYDES');
    </script>

    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Viet Dataverse",
      "alternateName": ["VietDataverse", "vietdataverse", "Giá Vàng Hôm Nay - Dữ Liệu Kinh Tế Việt Nam"],
      "url": "https://vietdataverse.online/",
      "description": "Theo dõi giá vàng SJC hôm nay, giá bạc Phú Quý, lãi suất ngân hàng SBV. Tải dữ liệu lịch sử miễn phí.",
      "inLanguage": "vi-VN",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://vietdataverse.online/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Dataset",
      "name": "Tải Lịch Sử Giá Vàng Việt Nam - Download Vietnam Historical Gold Price",
      "description": "Tải lịch sử giá vàng SJC, DOJI, PNJ từ 2015 miễn phí. Download Vietnam historical gold price data với cập nhật 2 lần mỗi ngày. Hỗ trợ API và CSV export.",
      "url": "https://vietdataverse.online/",
      "keywords": ["tải lịch sử giá vàng", "download vietnam historical gold price", "giá vàng csv", "vietnam gold price data", "lịch sử giá vàng sjc", "gold price api vietnam"],
      "creator": {
        "@type": "Organization",
        "name": "Viet Dataverse"
      },
      "distribution": [
        {
          "@type": "DataDownload",
          "encodingFormat": "CSV",
          "contentUrl": "https://api.vietdataverse.online/api/v1/gold",
          "name": "Tải dữ liệu giá vàng CSV",
          "description": "Download Vietnam gold price historical data"
        },
        {
          "@type": "DataDownload",
          "encodingFormat": "application/json",
          "contentUrl": "https://api.vietdataverse.online/api/v1/gold",
          "name": "Gold Price API",
          "description": "RESTful API for Vietnam historical gold prices"
        }
      ],
      "temporalCoverage": "2015/..",
      "spatialCoverage": {
        "@type": "Place",
        "name": "Vietnam"
      }
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Dataset",
      "name": "Dữ Liệu Giá Bạc Phú Quý Việt Nam",
      "description": "Lịch sử giá bạc thỏi Phú Quý tại thị trường Việt Nam, cập nhật 2 lần mỗi ngày từ nguồn công khai",
      "url": "https://vietdataverse.online/",
      "keywords": ["giá bạc", "giá bạc hôm nay", "bạc Phú Quý", "giá bạc thỏi"],
      "creator": {
        "@type": "Organization",
        "name": "Viet Dataverse"
      },
      "distribution": {
        "@type": "DataDownload",
        "encodingFormat": "CSV",
        "contentUrl": "https://api.vietdataverse.online/api/v1/silver"
      }
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Giá vàng SJC hôm nay là bao nhiêu?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Viet Dataverse cung cấp giá vàng trong nước được cập nhật hàng ngày. Bạn có thể xem biểu đồ lịch sử và tải dữ liệu miễn phí."
          }
        },
        {
          "@type": "Question",
          "name": "Làm thế nào để tải lịch sử giá vàng Việt Nam?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Tại Viet Dataverse, bạn có thể tải lịch sử giá vàng SJC, DOJI, PNJ từ 2015 hoàn toàn miễn phí. Click vào nút 'Download' trong mục Download Datasets hoặc truy cập API tại https://api.vietdataverse.online/api/v1/gold"
          }
        },
        {
          "@type": "Question",
          "name": "How to download Vietnam historical gold price data?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Download Vietnam historical gold price free at Viet Dataverse. Click 'Download' button in Download Datasets section or access API at https://api.vietdataverse.online/api/v1/gold. Data includes SJC, DOJI, PNJ prices from 2015."
          }
        },
        {
          "@type": "Question",
          "name": "Lãi suất liên ngân hàng SBV là gì?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Lãi suất liên ngân hàng SBV là lãi suất mà các ngân hàng thương mại cho vay lẫn nhau, được Ngân hàng Nhà nước Việt Nam công bố. Dữ liệu cập nhật hàng ngày tại Viet Dataverse."
          }
        }
      ]
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Trang chủ",
          "item": "https://vietdataverse.online/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Dữ Liệu Kinh Tế Việt Nam",
          "item": "https://vietdataverse.online/"
        }
      ]
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Viet Dataverse",
      "alternateName": ["VietDataverse", "vietdataverse", "Viet Dataverse"],
      "url": "https://vietdataverse.online/",
      "logo": {
        "@type": "ImageObject",
        "url": "https://vietdataverse.online/icon-512.png",
        "width": 512,
        "height": 512
      },
      "description": "Nền tảng dữ liệu kinh tế Việt Nam minh bạch, cung cấp giá vàng, giá bạc, lãi suất ngân hàng và các chỉ số thị trường",
      "sameAs": [
        "https://github.com/findatasolution/vietdataverse"
      ]
    }
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --gold-primary: #C9A55B;
            --gold-accent: #E4C78A;
            --gold-dark: #8B7355;
            --silver: #B8B8B8;
            --silver-light: #D4D4D4;
            --bg-dark: #0A0A0A;
            --bg-secondary: #141414;
            --bg-elevated: #1C1C1C;
            --text-primary: #FFFFFF;
            --text-secondary: #A0A0A0;
            --text-tertiary: #707070;
            --border-color: rgba(201, 165, 91, 0.15);
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.6);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .app-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            grid-template-rows: 80px 1fr;
            min-height: 100vh;
            max-width: 2000px;
            margin: 0 auto;
        }

        /* Mobile menu toggle */
        .mobile-menu-btn {
            display: none;
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            padding: 0.625rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.25rem;
            transition: all 0.2s ease;
        }

        .mobile-menu-btn:hover {
            border-color: var(--gold-primary);
            color: var(--gold-accent);
        }

        .mobile-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 199;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .mobile-overlay.active {
            display: block;
            opacity: 1;
            pointer-events: auto;
        }

        /* Header */
        .app-header {
            grid-column: 1 / -1;
            background: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-dark) 100%);
            border-bottom: 1px solid var(--border-color);
            padding: 0 3rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            backdrop-filter: blur(20px);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 1.25rem;
        }

        .brand-icon {
            width: 44px;
            height: 44px;
            /* background: linear-gradient(135deg, var(--gold-primary) 0%, var(--gold-accent) 100%); */
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            /* box-shadow: 0 4px 12px rgba(201, 165, 91, 0.3); */
            overflow: hidden;
        }

        .brand-icon img {
            width: 120%;
            height: 120%;
            object-fit: contain;
            padding: 4px;
        }

        .brand-text h1 {
            font-family: 'Playfair Display', serif;
            font-size: 1.75rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            /* background: linear-gradient(135deg, var(--gold-accent) 0%, var(--gold-primary) 100%); */
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.125rem;
        }

        .brand-subtitle {
            font-size: 0.75rem;
            color: var(--text-tertiary);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .header-actions {
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }

        .header-btn {
            padding: 0.625rem 1.25rem;
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .header-btn:hover {
            border-color: var(--gold-primary);
            color: var(--gold-accent);
        }

        .header-btn.primary {
            background: linear-gradient(135deg, var(--gold-primary), var(--gold-accent));
            border: none;
            color: var(--bg-dark);
        }

        .header-btn.primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(201, 165, 91, 0.4);
        }

        .header-btn.danger {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #EF4444;
        }

        .header-btn.danger:hover {
            background: rgba(239, 68, 68, 0.2);
            border-color: rgba(239, 68, 68, 0.5);
            color: #EF4444;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(201, 165, 91, 0.1);
            border: 1px solid rgba(201, 165, 91, 0.2);
            border-radius: 8px;
            font-size: 0.875rem;
            color: var(--gold-accent);
        }

        .user-avatar {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, var(--gold-primary), var(--gold-accent));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--bg-dark);
        }

        /* Sidebar */
        .sidebar {
            background-color: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            padding: 2rem 1.5rem;

            position: sticky;
            top: 80px;              /* chiều cao header desktop */
            height: calc(100vh - 80px);
            overflow-y: auto;
        }

        .sidebar-section {
            margin-bottom: 2.5rem;
        }

        .sidebar-heading {
            font-size: 0.6875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            color: var(--text-tertiary);
            margin-bottom: 1rem;
            padding: 0 0.75rem;
        }

        /* Sidebar buttons */
        .sidebar-btn {
            width: 100%;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
        }

        .sidebar-btn:hover {
            border-color: var(--gold-primary);
            background: rgba(201, 165, 91, 0.05);
            color: var(--gold-accent);
        }

        .sidebar-btn.primary {
            background: rgba(201, 165, 91, 0.15);
            border-color: var(--gold-primary);
            color: var(--gold-accent);
        }

        .sidebar-btn.danger {
            background: rgba(239, 68, 68, 0.1);
            border-color: rgba(239, 68, 68, 0.3);
            color: #EF4444;
        }

        .sidebar-btn.danger:hover {
            background: rgba(239, 68, 68, 0.2);
            border-color: rgba(239, 68, 68, 0.5);
        }

        .sidebar-link {
            text-decoration: none;
            display: block;
        }

        .sidebar-user-info {
            padding: 0.75rem 1rem;
            background: rgba(201, 165, 91, 0.1);
            border: 1px solid rgba(201, 165, 91, 0.2);
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }

        .sidebar-user-email {
            font-size: 0.875rem;
            color: var(--gold-accent);
            font-weight: 500;
            word-break: break-all;
        }

        /* Mobile only elements */
        .mobile-only {
            display: none;
        }

        .nav-list {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 0.375rem;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.875rem;
            padding: 0.75rem;
            border-radius: 8px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9375rem;
            font-weight: 500;
            transition: all 0.2s ease;
            position: relative;
            cursor: pointer;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 0;
            background: var(--gold-primary);
            border-radius: 0 2px 2px 0;
            transition: height 0.2s ease;
        }

        .nav-link:hover,
        .nav-link.active {
            background-color: rgba(201, 165, 91, 0.08);
            color: var(--text-primary);
        }

        .nav-link.active::before {
            height: 60%;
        }

        .nav-icon {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            font-size: 1rem;
            flex-shrink: 0;
        }

        .nav-link.active .nav-icon {
            background: linear-gradient(135deg, rgba(201, 165, 91, 0.2), rgba(228, 199, 138, 0.2));
        }

        .nav-content {
            flex: 1;
        }

        .nav-content h4 {
            font-size: 0.9375rem;
            font-weight: 500;
            margin-bottom: 0.125rem;
        }

        .nav-meta {
            font-size: 0.75rem;
            color: var(--text-tertiary);
            font-weight: 400;
        }

        /* Subnav for articles - Always visible */
        .subnav-list {
            list-style: none;
            max-height: none;
            overflow: visible;
            margin-left: 1rem;
            margin-top: 0.5rem;
        }

        .subnav-item {
            margin-bottom: 0.25rem;
        }

        .subnav-item .nav-link {
            padding: 0.625rem 0.75rem;
            font-size: 0.875rem;
        }

        .subnav-item .nav-link::before {
            display: none;
        }

        .subnav-item .nav-content h4 {
            font-size: 0.875rem;
            font-weight: 400;
            line-height: 1.4;
        }

        /* Main Content */
        .main-content {
            padding: 3rem;
            overflow-y: auto;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Article View */
        .article-featured {
            background: var(--bg-elevated);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 3rem;
        }

        .article-header {
            padding: 2.5rem 3rem 2rem;
            border-bottom: 1px solid var(--border-color);
        }

        .article-tag {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(201, 165, 91, 0.1);
            border: 1px solid rgba(201, 165, 91, 0.2);
            border-radius: 6px;
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--gold-accent);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 1.5rem;
        }

        .article-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.75rem;
            font-weight: 700;
            line-height: 1.2;
            color: var(--text-primary);
            margin-bottom: 1.25rem;
            letter-spacing: -0.02em;
        }

        .article-meta {
            display: flex;
            align-items: center;
            gap: 2rem;
            color: var(--text-tertiary);
            font-size: 0.875rem;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .meta-item i {
            color: var(--gold-primary);
            font-size: 0.875rem;
        }

        .article-body {
            padding: 2.5rem 3rem;
        }

        .article-text {
            font-size: 1.0625rem;
            line-height: 1.8;
            color: var(--text-secondary);
        }

        .article-text p {
            margin-bottom: 1.5rem;
        }

        .article-text strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        /* Live Indicators View */
        .indicators-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .indicator-card {
            background: var(--bg-elevated);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            transition: all 0.3s ease;
        }

        .indicator-card:hover {
            border-color: rgba(201, 165, 91, 0.3);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .indicator-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .indicator-icon {
            width: 48px;
            height: 48px;
            border-radius: 10px;
            background: linear-gradient(135deg, rgba(201, 165, 91, 0.15), rgba(228, 199, 138, 0.15));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .indicator-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .indicator-value {
            font-family: 'Playfair Display', serif;
            font-size: 2.25rem;
            font-weight: 700;
            color: var(--gold-accent);
            margin-bottom: 0.5rem;
        }

        .indicator-change {
            font-size: 0.875rem;
            color: var(--text-tertiary);
        }

        .indicator-change.positive {
            color: #22C55E;
        }

        .indicator-change.negative {
            color: #EF4444;
        }

        .indicator-meta {
            font-size: 0.75rem;
            color: var(--text-tertiary);
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        /* Data Portal View */
        .section-header {
            margin-bottom: 3rem;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            letter-spacing: -0.02em;
        }

        .section-subtitle {
            font-size: 1.0625rem;
            color: var(--text-tertiary);
            max-width: 720px;
        }

        .datasets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .dataset-card {
            background: var(--bg-elevated);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .dataset-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--gold-primary), var(--gold-accent));
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s ease;
        }

        .dataset-card:hover {
            border-color: rgba(201, 165, 91, 0.3);
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .dataset-card:hover::before {
            transform: scaleX(1);
        }

        .dataset-card.disabled {
            opacity: 0.5;
        }

        .dataset-card.disabled:hover {
            transform: none;
            border-color: var(--border-color);
        }

        .dataset-top {
            display: flex;
            align-items: flex-start;
            gap: 1.25rem;
            margin-bottom: 1.5rem;
        }

        /* Dataset icon removed for cleaner design */

        .dataset-info h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .dataset-desc {
            font-size: 0.9375rem;
            color: var(--text-tertiary);
            line-height: 1.6;
            margin-bottom: 1.25rem;
        }

        .dataset-stats {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8125rem;
            color: var(--text-tertiary);
        }

        .stat-item i {
            color: var(--gold-primary);
            font-size: 0.875rem;
        }

        .dataset-actions {
            display: flex;
            gap: 0.75rem;
        }

        .btn {
            flex: 1;
            padding: 0.75rem 1.25rem;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            text-decoration: none;
            border: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--gold-primary), var(--gold-accent));
            color: var(--bg-dark);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(201, 165, 91, 0.4);
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        .btn-secondary:hover {
            border-color: var(--gold-primary);
            color: var(--gold-accent);
            background: rgba(201, 165, 91, 0.05);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .api-section {
            background: rgba(201, 165, 91, 0.05);
            border: 1px solid rgba(201, 165, 91, 0.15);
            border-radius: 12px;
            padding: 2.5rem;
        }

        .api-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .api-header h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .api-description {
            color: var(--text-tertiary);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .api-endpoints {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .api-endpoint {
            background: var(--bg-dark);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem 1.25rem;
            font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
            font-size: 0.875rem;
            color: var(--gold-accent);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .method {
            color: #22C55E;
            font-weight: 700;
            font-size: 0.75rem;
        }

        .api-footer {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: var(--text-tertiary);
        }

        .api-footer a {
            color: var(--gold-accent);
            text-decoration: none;
            font-weight: 500;
        }

        .api-footer a:hover {
            text-decoration: underline;
        }

        /* Tab Navigation */
        .chart-tabs {
            display: flex;
            gap: 8px;
            background: rgba(201, 165, 91, 0.03);
            padding: 6px;
            border-radius: 16px;
            border: 1px solid rgba(201, 165, 91, 0.1);
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .chart-tab-btn {
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--text-secondary);
            background: transparent;
            border: none;
            cursor: pointer;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .chart-tab-btn:hover:not(.active) {
            background: rgba(201, 165, 91, 0.1);
            color: var(--gold-accent);
        }

        .chart-tab-btn.active {
            background: linear-gradient(135deg, var(--gold-primary), var(--gold-accent));
            color: #0A0A0A;
            box-shadow: 0 4px 20px rgba(201, 165, 91, 0.3);
        }

        .chart-tab-btn i {
            font-size: 1rem;
        }

        .tab-content {
            display: none;
            animation: fadeInTab 0.3s ease-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeInTab {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Skeleton Loading */
        .skeleton {
            background: linear-gradient(
                90deg,
                var(--bg-elevated) 0%,
                rgba(201, 165, 91, 0.08) 50%,
                var(--bg-elevated) 100%
            );
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 8px;
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .chart-skeleton {
            height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            gap: 8px;
            padding: 20px;
        }

        .chart-skeleton .skeleton-bar {
            border-radius: 4px 4px 0 0;
        }

        .skeleton-bars {
            display: flex;
            align-items: flex-end;
            gap: 12px;
            height: 300px;
        }

        .skeleton-bars .skeleton-bar {
            flex: 1;
            min-width: 20px;
        }

        /* Charts Section */
        .charts-section {
            margin-bottom: 3rem;
        }

        .chart-card {
            background: var(--bg-elevated);
            border: 1px solid rgba(201, 165, 91, 0.1);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .chart-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--gold-primary), var(--gold-accent));
            opacity: 0;
            transition: opacity 0.3s;
        }

        .chart-card:hover::before {
            opacity: 1;
        }

        .chart-card:hover {
            border-color: rgba(201, 165, 91, 0.3);
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3), 0 0 30px rgba(201, 165, 91, 0.1);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .chart-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .chart-filters {
            display: flex;
            gap: 0.5rem;
            background: rgba(201, 165, 91, 0.05);
            padding: 0.375rem;
            border-radius: 8px;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            background: transparent;
            border: none;
            border-radius: 6px;
            color: var(--text-secondary);
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .filter-btn:hover {
            color: var(--text-primary);
            background: rgba(201, 165, 91, 0.1);
        }

        .filter-btn.active {
            background: linear-gradient(135deg, var(--gold-primary), var(--gold-accent));
            color: var(--bg-dark);
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin-top: 1rem;
            touch-action: pan-y;
            user-select: none;
        }

        .chart-container canvas {
            cursor: pointer;
        }

        .chart-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--text-tertiary);
            font-size: 0.875rem;
        }

        .chart-error {
            padding: 2rem;
            text-align: center;
            color: var(--text-tertiary);
            background: rgba(239, 68, 68, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gold-dark);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gold-primary);
        }

        /* Notification Overlay */
        .notification-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .notification-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .notification-card {
            background: var(--bg-elevated);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 2rem;
            max-width: 400px;
            width: 90%;
            margin: 1rem;
            box-shadow: var(--shadow-lg);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .notification-overlay.active .notification-card {
            transform: translateY(0);
        }

        .notification-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--gold-primary), var(--gold-accent));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            font-size: 1.5rem;
            color: var(--bg-dark);
        }

        .notification-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            text-align: center;
            margin-bottom: 0.75rem;
            letter-spacing: -0.02em;
        }

        .notification-message {
            color: var(--text-secondary);
            text-align: center;
            line-height: 1.6;
            margin-bottom: 2rem;
            font-size: 0.95rem;
        }

        .notification-actions {
            display: flex;
            gap: 0.75rem;
            justify-content: center;
        }

        .notification-btn {
            flex: 1;
            padding: 0.875rem 1.5rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            min-width: 100px;
        }

        .notification-btn.primary {
            background: linear-gradient(135deg, var(--gold-primary), var(--gold-accent));
            color: var(--bg-dark);
        }

        .notification-btn.primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(201, 165, 91, 0.4);
        }

        .notification-btn.secondary {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        .notification-btn.secondary:hover {
            border-color: var(--gold-primary);
            color: var(--gold-accent);
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .app-container {
                grid-template-columns: 280px 1fr;
            }

            .datasets-grid {
                grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            }

            .indicators-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
        }

        @media (max-width: 968px) {
            .app-container {
                grid-template-columns: 1fr;
                grid-template-rows: 70px 1fr;
            }

            .mobile-menu-btn {
                display: block;
            }

            /* Tab Navigation Mobile */
            .chart-tabs {
                padding: 4px;
                gap: 4px;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none;
            }

            .chart-tabs::-webkit-scrollbar {
                display: none;
            }

            .chart-tab-btn {
                padding: 10px 16px;
                font-size: 0.8rem;
                white-space: nowrap;
                flex-shrink: 0;
            }

            .chart-tab-btn span {
                display: none;
            }

            .chart-tab-btn i {
                margin: 0;
            }

            .chart-card {
                padding: 16px;
                border-radius: 16px;
            }

            .chart-card:hover {
                transform: none;
            }

            .skeleton-bars {
                gap: 8px;
            }

            .sidebar {
                position: fixed;
                top: 70px;
                left: -100%;
                width: 280px;
                height: calc(100vh - 70px);
                background-color: var(--bg-secondary);
                border-right: 1px solid var(--border-color);
                padding: 1.5rem;
                transition: left 0.3s ease;
                z-index: 200;
                overflow-y: auto;
            }

            .sidebar.active {
                left: 0;
            }

            .app-header {
                padding: 0 1rem;
                height: 70px;
            }

            .brand-icon {
                width: 38px;
                height: 38px;
                font-size: 1.25rem;
            }

            .brand-text h1 {
                font-size: 1.25rem;
            }

            .brand-subtitle {
                font-size: 0.65rem;
            }

            .header-actions {
                gap: 0.5rem;
            }

            .header-btn {
                padding: 0.5rem 0.75rem;
                font-size: 0.8125rem;
            }

            .header-btn span {
                display: none;
            }

            .main-content {
                padding: 1.5rem 1rem;
            }

            .section-title {
                font-size: 1.75rem;
            }

            .section-subtitle {
                font-size: 0.9375rem;
            }

            .article-title {
                font-size: 1.75rem;
            }

            .article-text {
                font-size: 1rem;
            }

            .datasets-grid,
            .indicators-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .dataset-card,
            .indicator-card {
                padding: 1.5rem;
            }

            .article-header,
            .article-body {
                padding: 1.5rem 1rem;
            }

            .article-meta {
                flex-wrap: wrap;
                gap: 1rem;
            }

            .api-section {
                padding: 1.5rem;
            }

            .api-endpoint {
                font-size: 0.75rem;
                padding: 0.875rem 1rem;
                flex-wrap: wrap;
            }

            .dataset-stats {
                flex-wrap: wrap;
            }
        }

        @media (max-width: 640px) {
            .brand {
                gap: 0.75rem;
            }

            .brand-icon {
                width: 32px;
                height: 32px;
                font-size: 1.125rem;
            }

            .brand-text h1 {
                font-size: 1.125rem;
            }

            .brand-subtitle {
                display: none;
            }

            .header-btn:not(.mobile-menu-btn) {
                display: none;
            }

            /* Mobile-friendly user info */
            .user-info {
                padding: 0.375rem 0.75rem;
                max-width: 200px;
            }

            #user-email {
                font-size: 0.75rem;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                max-width: 180px;
            }

            .header-link {
                display: none;
            }

            /* Show mobile controls in sidebar */
            .mobile-only {
                display: block;
            }

            /* Hide all header actions on mobile */
            .header-actions {
                display: none;
            }

            .main-content {
                padding: 1rem;
            }

            .section-header {
                margin-bottom: 1.5rem;
            }

            .section-title {
                font-size: 1.5rem;
            }

            .article-title {
                font-size: 1.5rem;
                line-height: 1.3;
            }

            .chart-container {
                height: 320px;
                margin-top: 0.75rem;
                overflow: visible;
            }

            .chart-card {
                padding: 1rem;
                margin-bottom: 1rem;
                overflow-x: hidden;
            }

            .chart-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
                margin-bottom: 1rem;
            }

            .chart-title {
                font-size: 1.125rem;
            }

            .chart-filters {
                width: 100%;
                flex-wrap: wrap;
                padding: 0.5rem;
            }

            .filter-btn {
                font-size: 0.75rem;
                padding: 0.5rem 0.75rem;
            }

            .type-select {
                font-size: 0.875rem !important;
                padding: 0.5rem !important;
                margin-right: 0.5rem !important;
            }

            .article-tag {
                font-size: 0.75rem;
                padding: 0.375rem 0.75rem;
            }

            .dataset-top {
                gap: 1rem;
            }

            .dataset-icon,
            .indicator-icon {
                width: 48px;
                height: 48px;
                font-size: 1.5rem;
            }

            .dataset-info h3,
            .indicator-title {
                font-size: 1.0625rem;
            }

            .indicator-value {
                font-size: 1.875rem;
            }

            .dataset-actions {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }

            .api-endpoints {
                gap: 0.5rem;
            }

            .api-endpoint {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
        }
    </style>

    <!-- Auth0 SPA SDK -->
    <script src="https://cdn.auth0.com/js/auth0-spa-js/2.1/auth0-spa-js.production.js"></script>

    <!-- Auth module -->
    <script src="auth.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="brand">
                <button class="mobile-menu-btn" id="mobile-menu-toggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="brand-icon">
                    <img src="https://ik.imagekit.io/o2u9hny2s/vietdataverse/V2.png" alt="Viet Dataverse Logo">
                </div>
                <div class="brand-text">
                    <div style="font-family: 'Playfair Display', serif; font-size: 1.75rem; font-weight: 700; letter-spacing: -0.02em; background: linear-gradient(135deg, var(--gold-accent) 0%, var(--gold-primary) 100%); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 0.125rem;">Viet Dataverse</div>
                    <p class="brand-subtitle">Economic Intelligence</p>
                </div>
            </div>
            <div class="header-actions">
                <button class="header-btn" id="lang-toggle">
                    <span id="lang-text">En/Vie</span>
                </button>

                <!-- Authenticated user info -->
                <div class="user-info" id="user-info" style="display: none;">
                    <!-- <div class="user-avatar">U</div> -->
                    <div>
                        <div id="user-email" style="font-weight: 500;"></div>
                        <!-- <div style="font-size: 0.75rem; opacity: 0.7;">Đã đăng nhập</div> -->
                    </div>
                </div>

                <!-- Login button (shown when not authenticated) -->
                <a href="#" class="header-link" id="login-link" onclick="event.preventDefault(); login();">
                    <button class="header-btn primary">
                        <span>Đăng nhập</span>
                    </button>
                </a>

                <!-- Logout button (shown when authenticated) -->
                <button class="header-btn danger" id="logout-btn" style="display: none;">
                    <span>Đăng xuất</span>
                </button>
            </div>
        </header>

        <!-- Mobile Overlay -->
        <div class="mobile-overlay" id="mobile-overlay"></div>

        <!-- Sidebar -->
        <aside class="sidebar">
            <!-- Mobile User Controls Section -->
            <div class="sidebar-section">
                <h2 class="sidebar-heading">Navigation</h2>
                <ul class="nav-list">
                    <li class="nav-item">
                        <a class="nav-link active" data-tab="data-portal">
                            <div class="nav-content">
                                <h4>Open Economic Data</h4>
                            </div>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-tab="1smarket-portal">
                            <div class="nav-content">
                                <h4>1s Market Pulse</h4>
                            </div>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-tab="download-api">
                            <div class="nav-content">
                                <h4>Download & API</h4>
                                <span class="nav-meta">Tải dữ liệu & API access</span>
                            </div>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-tab="about-terms">
                            <div class="nav-content">
                                <h4>About & Terms</h4>
                                <span class="nav-meta">Về dự án & Điều khoản</span>
                            </div>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="sidebar-section mobile-only">
                <h2 class="sidebar-heading">Account</h2>

                <!-- Language Toggle -->
                <button class="sidebar-btn" id="sidebar-lang-toggle">
                    <i class="fas fa-language"></i>
                    <span id="sidebar-lang-text">En/Vie</span>
                </button>

                <!-- User Info (shown when authenticated) -->
                <div class="sidebar-user-info" id="sidebar-user-info" style="display: none;">
                    <div class="sidebar-user-email" id="sidebar-user-email"></div>
                </div>

                <!-- Login Link (shown when not authenticated) -->
                <a href="#" class="sidebar-link" id="sidebar-login-link" onclick="event.preventDefault(); login();">
                    <button class="sidebar-btn primary">
                        <i class="fas fa-sign-in-alt"></i>
                        <span>Đăng nhập</span>
                    </button>
                </a>

                <!-- Logout Button (shown when authenticated) -->
                <button class="sidebar-btn danger" id="sidebar-logout-btn" style="display: none;">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Đăng xuất</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="tab-content active" id="data-portal">
                <div class="section-header">
                    <h1 class="section-title" style="font-size: 2.5rem;">Dữ Liệu Kinh Tế Mở</h1>
                    <p class="section-subtitle" style="font-size: 1.125rem;">
                        <strong>Tải lịch sử giá vàng, giá bạc, lãi suất SBV</strong> từ 2009 miễn phí.
                        <strong>Download Vietnam historical gold, silver price, interbank data</strong>
                        API & csv export hoàn toàn miễn phí cho phân tích và nghiên cứu kinh tế.
                    </p>
                </div>

                <!-- Charts Section with Tabs -->
                <div class="charts-section">
                    <!-- Tab Navigation -->
                    <div class="chart-tabs">
                        <button class="chart-tab-btn active" data-tab="tab-gold-silver">
                            <i class="fas fa-coins"></i>
                            <span>Vàng & Bạc</span>
                        </button>
                        <button class="chart-tab-btn" data-tab="tab-currency">
                            <i class="fas fa-university"></i>
                            <span>Tiền tệ VN</span>
                        </button>
                        <button class="chart-tab-btn" data-tab="tab-global">
                            <i class="fas fa-globe"></i>
                            <span>Thị trường Quốc tế</span>
                        </button>
                    </div>

                    <!-- Tab 1: Vàng & Bạc (Load immediately) -->
                    <div class="tab-content active" id="tab-gold-silver">
                        <!-- Gold Price Chart -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">
                                    Lịch Sử Giá Vàng Việt Nam
                                </h3>
                                <div class="chart-filters">
                                    <select id="goldTypeSelect" class="type-select" style="margin-right: 10px; padding: 8px; border-radius: 4px; border: 1px solid rgba(201, 165, 91, 0.3); background: #1C1C1C; color: #A0A0A0;">
                                        <option value="DOJI HN">DOJI HN</option>
                                    </select>
                                    <button class="filter-btn" data-chart="gold" data-period="7d">7 Days</button>
                                    <button class="filter-btn active" data-chart="gold" data-period="1m">1 Month</button>
                                    <button class="filter-btn" data-chart="gold" data-period="1y">1 Year</button>
                                    <button class="filter-btn" data-chart="gold" data-period="all">All</button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="goldChart"></canvas>
                                <div class="chart-loading" id="goldLoading">
                                    <div class="chart-skeleton">
                                        <div class="skeleton-bars">
                                            <div class="skeleton skeleton-bar" style="height: 60%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 80%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 45%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 90%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 70%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 55%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 85%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 65%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Silver Price Chart -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">
                                    Lịch Sử Giá Bạc Việt Nam - Phú Quý
                                </h3>
                                <div class="chart-filters">
                                    <button class="filter-btn" data-chart="silver" data-period="7d">7 Days</button>
                                    <button class="filter-btn active" data-chart="silver" data-period="1m">1 Month</button>
                                    <button class="filter-btn" data-chart="silver" data-period="1y">1 Year</button>
                                    <button class="filter-btn" data-chart="silver" data-period="all">All</button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="silverChart"></canvas>
                                <div class="chart-loading" id="silverLoading">
                                    <div class="chart-skeleton">
                                        <div class="skeleton-bars">
                                            <div class="skeleton skeleton-bar" style="height: 70%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 50%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 85%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 60%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 75%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 55%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 90%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 65%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Gold Price Analysis -->
                        <article class="article-featured" id="article-1">
                            <div class="article-header">
                                <span class="article-tag">
                                    Phân Tích Thị Trường Vàng
                                </span>
                                <h1 class="article-title">Phân Tích Giá Vàng Hôm Nay: Xu Hướng Tăng Mạnh Theo Thị Trường Toàn Cầu</h1>
                                <div class="article-meta">
                                    <span class="meta-item">
                                        Viet Dataverse
                                    </span>
                                    <span class="meta-item">
                                        13/01/2026 • 08:00
                                    </span>
                                    <span class="meta-item">
                                        Automated Analysis by Fintel
                                    </span>
                                </div>
                            </div>
                            <div class="article-body">
                                <div class="article-text">
                                    <h3>Diễn biến thị trường vàng toàn cầu</h3>
                                    <p>
                                        Giá vàng tương lai trên sàn COMEX đạt <strong>$2,690/oz</strong>, tăng 1.2% so với phiên giao dịch trước đó, phản ánh tâm lý lo ngại về lạm phát toàn cầu và căng thẳng địa chính trị gia tăng.
                                        Chỉ số NASDAQ Composite ghi nhận mức <strong>19,630 điểm</strong>, giảm 0.8% trong tuần qua, khiến dòng vốn chuyển hướng sang tài sản trú ẩn an toàn như vàng và trái phiếu chính phủ.
                                        Giá bạc giao ngay tại thị trường quốc tế đạt <strong>$31.2/oz</strong>, tăng 2.1% theo xu hướng của vàng, cho thấy kim loại quý đang được ưa chuộng trong bối cảnh bất ổn kinh tế.
                                    </p>

                                    <h3>Thị trường vàng trong nước</h3>
                                    <p>
                                        Vàng SJC tại Hà Nội hôm nay giao dịch ở mức <strong>160.0 - 160.0 triệu đồng/lượng</strong> (mua vào - bán ra), tăng 2.2 triệu đồng (+1.4%) so với phiên trước, đạt mức cao nhất trong 3 tháng qua theo dữ liệu từ DOJI.
                                        Chênh lệch giá mua-bán thu hẹp xuống còn 0 đồng, phản ánh thanh khoản tốt và nhu cầu mua vào mạnh mẽ từ nhà đầu tư cá nhân và tổ chức.
                                        Khối lượng giao dịch vàng miếng SJC tăng 35% so với tuần trước, cho thấy dòng tiền đang đổ mạnh vào kênh đầu tư vàng vật chất khi thị trường chứng khoán biến động.
                                    </p>

                                    <h3>Dự báo tuần tới (13-19/01/2026)</h3>
                                    <p>
                                        Giá vàng trong nước dự kiến <strong>tiếp tục xu hướng tăng</strong> trong tuần tới với biên độ 1-3 triệu đồng/lượng, chạm mốc 162-163 triệu đồng, do áp lực từ giá vàng thế giới tăng mạnh và tâm lý trú ẩn an toàn tăng cao.
                                        Yếu tố chính hỗ trợ đà tăng là cuộc họp Fed ngày 29/01 sắp tới, thị trường kỳ vọng Fed sẽ giữ nguyên lãi suất ở mức 5.25-5.50%, tạo áp lực giảm lên đồng USD và đẩy giá vàng lên cao.
                                        Rủi ro điều chỉnh giảm có thể xảy ra nếu số liệu CPI tháng 1 của Mỹ (công bố 15/01) thấp hơn dự báo, làm giảm kỳ vọng lạm phát và giảm sức hấp dẫn của vàng như công cụ phòng ngừa rủi ro.
                                    </p>
                                    <p class="article-disclaimer">
                                        <em>Lưu ý: Đây là phân tích dựa trên dữ liệu lịch sử và xu hướng thị trường. Nhà đầu tư nên tham khảo ý kiến chuyên gia trước khi đưa ra quyết định đầu tư.</em>
                                    </p>
                                </div>
                            </div>
                        </article>
                    </div>

                    <!-- Tab 2: Tiền tệ VN (Lazy load) -->
                    <div class="tab-content" id="tab-currency">
                        <!-- TD Chart - Term Deposit Interest Rates -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">
                                    Lãi Suất Gửi Tiết Kiệm
                                </h3>
                                <div class="chart-filters">
                                    <select id="bankTypeSelect" class="type-select" style="margin-right: 10px; padding: 8px; border-radius: 4px; border: 1px solid rgba(201, 165, 91, 0.3); background: #1C1C1C; color: #A0A0A0;">
                                        <option value="ACB">ACB</option>
                                        <option value="CTG">CTG</option>
                                        <option value="SHB">SHB</option>
                                    </select>
                                    <!-- <button class="filter-btn" data-chart="td" data-period="7d">7 Days</button>
                                    <button class="filter-btn active" data-chart="td" data-period="1m">1 Month</button> -->
                                    <button class="filter-btn" data-chart="td" data-period="1y">1 Year</button>
                                    <button class="filter-btn" data-chart="td" data-period="all">All</button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="tdChart"></canvas>
                                <div class="chart-loading" id="tdLoading">
                                    <div class="chart-skeleton">
                                        <div class="skeleton-bars">
                                            <div class="skeleton skeleton-bar" style="height: 55%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 75%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 60%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 85%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 70%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 50%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 80%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 65%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SBV Interbank Rate Chart -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">
                                    Lịch Sử Lãi Suất Liên Ngân Hàng SBV
                                </h3>
                                <div class="chart-filters">
                                    <button class="filter-btn" data-chart="sbv" data-period="7d">7 Days</button>
                                    <button class="filter-btn active" data-chart="sbv" data-period="1m">1 Month</button>
                                    <button class="filter-btn" data-chart="sbv" data-period="1y">1 Year</button>
                                    <button class="filter-btn" data-chart="sbv" data-period="all">All</button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="sbvChart"></canvas>
                                <div class="chart-loading" id="sbvLoading">
                                    <div class="chart-skeleton">
                                        <div class="skeleton-bars">
                                            <div class="skeleton skeleton-bar" style="height: 65%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 80%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 50%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 70%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 85%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 55%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 75%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 60%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 3: Thị trường Quốc tế (Lazy load) -->
                    <div class="tab-content" id="tab-global">
                        <!-- Global Macro Chart -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">
                                    Xu Hướng Thị Trường Toàn Cầu (Vàng, Bạc, NASDAQ)
                                </h3>
                                <div class="chart-filters">
                                    <button class="filter-btn" data-chart="global" data-period="7d">7 Days</button>
                                    <button class="filter-btn active" data-chart="global" data-period="1m">1 Month</button>
                                    <button class="filter-btn" data-chart="global" data-period="1y">1 Year</button>
                                    <button class="filter-btn" data-chart="global" data-period="all">All</button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="globalChart"></canvas>
                                <div class="chart-loading" id="globalLoading">
                                    <div class="chart-skeleton">
                                        <div class="skeleton-bars">
                                            <div class="skeleton skeleton-bar" style="height: 75%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 55%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 90%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 65%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 80%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 50%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 70%"></div>
                                            <div class="skeleton skeleton-bar" style="height: 85%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            
            <!-- 1s Market Pulse -->
            <div class="tab-content" id="1smarket-portal">
                <div class="section-header">
                    <h1 class="section-title" style="font-size: 2.5rem;">Thời báo 1 Giây</h1>
                    <p class="section-subtitle" style="font-size: 1.125rem;">
                        <strong>Thông tin toàn cầu ảnh hưởng đến thị trường tài chính trong nước</strong>
                    </p>
                </div>

                <div id="market-pulse-articles">
                    <div class="chart-loading" id="pulseLoading" style="padding: 3rem; text-align: center; color: var(--text-tertiary);">
                        Loading...
                    </div>
                </div>

            </div>
            <!-- Download & API Tab -->
            <div class="tab-content" id="download-api">
                <div class="section-header">
                    <h2 class="section-title">Tải Lịch Sử Giá Vàng - Download Vietnam Gold Price Data</h2>
                    <p class="section-subtitle">
                        <strong>Tải dữ liệu lịch sử giá vàng</strong> SJC, DOJI, PNJ, giá bạc, lãi suất ngân hàng miễn phí.
                        <strong>Download Vietnam historical gold price</strong> từ 2015 đến nay hoặc truy cập dữ liệu realtime với API key.
                    </p>
                </div>
                <div class="datasets-grid">
                    <!-- Gold Dataset -->
                    <div class="dataset-card">
                        <div class="dataset-top">
                            <div class="dataset-info">
                                <h3>Lịch Sử Giá Vàng Trong Nước</h3>
                            </div>
                        </div>
                        <p class="dataset-desc">
                            <strong>Tải lịch sử giá vàng</strong> SJC, DOJI, PNJ 24K từ 2015 đến nay. <strong>Download Vietnam historical gold price</strong> miễn phí.
                        </p>
                        <div class="dataset-stats">
                            <span class="stat-item">
                                <i class="fas fa-calendar-alt"></i>
                                2015 - Present
                            </span>
                            <span class="stat-item">
                                <i class="fas fa-database"></i>
                                1000+ records
                            </span>
                        </div>
                        <div class="dataset-actions">
                            <button class="btn btn-primary" data-download="gold" title="Tải lịch sử giá vàng">
                                <i class="fas fa-download"></i> Download
                            </button>
                            <button class="btn btn-secondary" data-api="gold" title="Vietnam gold price API">
                                <i class="fas fa-code"></i> API
                            </button>
                        </div>
                    </div>

                    <!-- Silver Dataset -->
                    <div class="dataset-card">
                        <div class="dataset-top">
                            <div class="dataset-info">
                                <h3>Giá Bạc Phú Quý</h3>
                            </div>
                        </div>
                        <p class="dataset-desc">
                            Giá bạc thỏi Phú Quý tại thị trường trong nước, cập nhật 2 lần mỗi ngày (8:30 sáng và 1:30 chiều) với kiểm tra chất lượng tự động từ nguồn công khai.
                        </p>
                        <div class="dataset-stats">
                            <span class="stat-item">
                                2023 - Present
                            </span>
                            <span class="stat-item">
                                560 records
                            </span>
                        </div>
                        <div class="dataset-actions">
                            <button class="btn btn-primary" data-download="silver">
                                <i class="fas fa-download"></i> Download
                            </button>
                            <button class="btn btn-secondary" data-api="silver">
                                <i class="fas fa-code"></i> API
                            </button>
                        </div>
                    </div>

                    <!-- SBV Interbank -->
                    <div class="dataset-card">
                        <div class="dataset-top">
                            <div class="dataset-info">
                                <h3>Lãi Suất Liên Ngân Hàng SBV</h3>
                            </div>
                        </div>
                        <p class="dataset-desc">
                            Lãi suất liên ngân hàng chính thức được Ngân hàng Nhà nước Việt Nam (SBV) công bố, bao gồm các kỳ hạn từ overnight đến 9 tháng.
                        </p>
                        <div class="dataset-stats">
                            <span class="stat-item">
                                2025 - Present
                            </span>
                            <span class="stat-item">
                                45+ updates
                            </span>
                        </div>
                        <div class="dataset-actions">
                            <button class="btn btn-primary" data-download="sbv">
                                <i class="fas fa-download"></i> Download
                            </button>
                            <button class="btn btn-secondary" data-api="sbv">
                                <i class="fas fa-code"></i> API
                            </button>
                        </div>
                    </div>

                    <!-- Term Deposit -->
                    <div class="dataset-card disabled">
                        <div class="dataset-top">
                            <div class="dataset-info">
                                <h3>Bank Term Deposit Rates</h3>
                            </div>
                        </div>
                        <p class="dataset-desc">
                            Savings interest rates from Vietnam's 8 largest commercial banks (VCB, VTB, TCB, MB, ACB, TPB, VPB, AGR).
                        </p>
                        <div class="dataset-stats">
                            <span class="stat-item">
                                In Development
                            </span>
                            <span class="stat-item">
                                Q1 2026
                            </span>
                        </div>
                        <div class="dataset-actions">
                            <button class="btn btn-primary" disabled>
                                Coming Soon
                            </button>
                        </div>
                    </div>

                    <!-- VN30 Financials -->
                    <div class="dataset-card disabled">
                        <div class="dataset-top">
                            <div class="dataset-info">
                                <h3>VN30 Financial Statements</h3>
                            </div>
                        </div>
                        <p class="dataset-desc">
                            Fundamental financial data for Vietnam's top 30 stocks by market cap, including balance sheets and key ratios.
                        </p>
                        <div class="dataset-stats">
                            <span class="stat-item">
                                In Development
                            </span>
                            <span class="stat-item">
                                Q2 2026
                            </span>
                        </div>
                        <div class="dataset-actions">
                            <button class="btn btn-primary" disabled>
                                Coming Soon
                            </button>
                        </div>
                    </div>

                    <!-- News Sentiment -->
                    <div class="dataset-card disabled">
                        <div class="dataset-top">
                            <div class="dataset-info">
                                <h3>News Sentiment Indicators</h3>
                            </div>
                        </div>
                        <p class="dataset-desc">
                            Economic news from 6 major outlets with AI-powered sentiment analysis on gold, silver, VN-Index and VN30 stocks.
                        </p>
                        <div class="dataset-stats">
                            <span class="stat-item">
                                In Development
                            </span>
                            <span class="stat-item">
                                Q2 2026
                            </span>
                        </div>
                        <div class="dataset-actions">
                            <button class="btn btn-primary" disabled>
                                Coming Soon
                            </button>
                        </div>
                    </div>
                </div>

                <!-- API Section -->
                <div class="api-section">
                    <div class="api-header">
                        <i class="fas fa-plug" style="color: var(--gold-primary); font-size: 1.5rem;"></i>
                        <h3>API Access</h3>
                    </div>
                    <p class="api-description">
                        Access datasets programmatically via our API. Processing...
                    </p>
                    <p class="api-footer">
                        <a href="../crawl_tools/data_description.html">Sign in</a> to receive notification when it available.
                    </p>
                </div>
            </div>

            <!-- About & Terms Tab -->
            <div class="tab-content" id="about-terms">
                <div class="section-header">
                    <h1 class="section-title">About & Terms</h1>
                    <p class="section-subtitle">Về Viet Dataverse, Nguồn Dữ Liệu & Điều Khoản Sử Dụng</p>
                </div>

                <!-- Về Viet Dataverse -->
                <div style="background: rgba(201, 165, 91, 0.05); border-left: 3px solid var(--gold-primary); padding: 1.5rem; margin: 2rem 0; border-radius: 8px; line-height: 1.8;">
                    <h2 style="color: var(--gold-accent); font-size: 1.5rem; margin-bottom: 1rem;">Về Viet Dataverse</h2>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                        <strong>Viet Dataverse</strong> là nền tảng dữ liệu kinh tế Việt Nam miễn phí, cung cấp thông tin <strong>giá vàng</strong>,
                        <strong>giá bạc</strong>, và <strong>lãi suất ngân hàng</strong> được thu thập tự động từ các nguồn công khai uy tín.
                    </p>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                        <strong>Giá vàng trong nước</strong> (SJC, DOJI) với dữ liệu lịch sử từ năm 2015 đến nay.
                        <strong>Giá bạc trong nước</strong> (Phú Quý) được cập nhật 2 lần mỗi ngày.
                        <strong>Lãi suất liên ngân hàng</strong> do Ngân hàng Nhà nước Việt Nam (SBV) công bố.
                        <strong>Lãi suất gửi tiết kiệm</strong> từ các ngân hàng thương mại lớn.
                    </p>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                        Dữ liệu được <strong>làm sạch, chuẩn hóa</strong> và lưu trữ lịch sử dài hạn để phục vụ <strong>mục đích nghiên cứu và phân tích</strong>.
                        Bạn có thể tải dữ liệu hoàn toàn miễn phí hoặc truy cập qua <strong>API</strong>.
                    </p>
                    <p style="color: #888; font-size: 0.9em; border-top: 1px solid rgba(201, 165, 91, 0.2); padding-top: 1rem; margin-top: 1rem;">
                        <strong>Lưu ý quan trọng:</strong> Dữ liệu chỉ mang tính chất tham khảo, không phải lời khuyên đầu tư.
                        Viet Dataverse không chịu trách nhiệm về các quyết định tài chính dựa trên dữ liệu này.
                        Người dùng cần tự kiểm tra và chịu trách nhiệm với quyết định của mình.
                    </p>

                </div>

                <!-- Về Nguồn Dữ Liệu & Phương Pháp Thu Thập -->
                <div style="background: rgba(0, 0, 0, 0.3); border-radius: 8px; border: 1px solid rgba(201, 165, 91, 0.2); padding: 2rem; margin: 2rem 0;">
                    <h2 style="color: var(--gold-accent); font-size: 1.5rem; margin-bottom: 1rem;">Về Nguồn Dữ Liệu & Phương Pháp Thu Thập</h2>
                    <p style="color: #A0A0A0; line-height: 1.8; margin-bottom: 1rem; font-size: 0.95rem;">
                        Dữ liệu trên Viet Dataverse được thu thập tự động từ <strong>các nguồn công khai, miễn phí</strong> bao gồm website của các tổ chức tài chính, công ty vàng bạc uy tín, và cơ quan nhà nước.
                        Tất cả dữ liệu đều là <strong>thông tin công khai</strong> mà bất kỳ ai cũng có thể truy cập.
                    </p>
                    <p style="color: #A0A0A0; line-height: 1.8; margin-bottom: 1rem; font-size: 0.95rem;">
                        Giá trị gia tăng của Viet Dataverse nằm ở việc <strong>làm sạch, chuẩn hóa, lưu trữ lịch sử dài hạn</strong> và cung cấp API miễn phí để phục vụ cộng đồng nghiên cứu.
                        Chúng tôi không sở hữu dữ liệu gốc, chỉ cung cấp dịch vụ tổng hợp và phân phối.
                    </p>
                </div>

                <!-- Điều Khoản Sử Dụng -->
                <div style="background: rgba(0, 0, 0, 0.3); border-radius: 8px; border: 1px solid rgba(201, 165, 91, 0.2); padding: 2rem; margin: 2rem 0;">
                    <h2 style="color: var(--gold-accent); font-size: 1.5rem; margin-bottom: 1rem;">Điều Khoản Sử Dụng</h2>
                    <ul style="color: #A0A0A0; line-height: 2; font-size: 0.95rem; padding-left: 1.5rem;">
                        <li><strong>Mục đích:</strong> Dữ liệu chỉ phục vụ mục đích nghiên cứu, học thuật, và phân tích cá nhân. Không dùng cho mục đích thương mại trừ khi có thỏa thuận.</li>
                        <li><strong>Không phải lời khuyên tài chính:</strong> Viet Dataverse không cung cấp lời khuyên đầu tư. Mọi quyết định tài chính là trách nhiệm của người dùng.</li>
                        <li><strong>Độ chính xác:</strong> Chúng tôi nỗ lực đảm bảo độ chính xác nhưng không chịu trách nhiệm về sai sót từ nguồn gốc hoặc quá trình thu thập.</li>
                        <li><strong>Bảo vệ nguồn:</strong> Người dùng cam kết không crawl ngược lại dữ liệu từ Viet Dataverse để tạo dịch vụ cạnh tranh.</li>
                    </ul>

                    <p style="color: #666; font-size: 0.85rem; margin-top: 1.5rem; font-style: italic;">
                        © 2026 Viet Dataverse. Nền tảng dữ liệu kinh tế Việt Nam mã nguồn mở.
                        <a href="mailto:contact@vietdataverse.online" style="color: var(--gold-primary); text-decoration: none;">Liên hệ</a>
                    </p>
                </div>
            </div>
        </main>
    </div>

    <!-- Notification Overlay (Download) -->
    <div class="notification-overlay" id="notification-overlay">
        <div class="notification-card">
            <div class="notification-icon">
                <i class="fas fa-lock"></i>
            </div>
            <h3 class="notification-title">Yêu cầu đăng nhập</h3>
            <p class="notification-message">
                Bạn cần đăng nhập để tải dữ liệu. Vui lòng đăng nhập để tiếp tục sử dụng các tính năng của Viet Dataverse.
            </p>
            <div class="notification-actions">
                <button class="notification-btn secondary" id="cancel-btn">
                    <span>Hủy</span>
                </button>
                <button class="notification-btn primary" id="login-btn">
                    <span>Đăng nhập</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Notification Overlay (API) -->
    <div class="notification-overlay" id="api-notification-overlay">
        <div class="notification-card">
            <div class="notification-icon">
                <i class="fas fa-code"></i>
            </div>
            <h3 class="notification-title">API đang phát triển</h3>
            <p class="notification-message" id="api-message">
                Tính năng API access hiện đang trong giai đoạn phát triển. Tạo tài khoản để nhận thông báo ngay khi tính năng sẵn sàng.
            </p>
            <p class="notification-message" id="api-message-logged-in" style="display: none;">
                Tính năng API access hiện đang trong giai đoạn phát triển. Bạn sẽ nhận được thông báo qua email khi tính năng sẵn sàng.
            </p>
            <div class="notification-actions">
                <button class="notification-btn secondary" id="api-cancel-btn">
                    <span>Đóng</span>
                </button>
                <button class="notification-btn primary" id="api-signup-btn">
                    <span>Tạo tài khoản</span>
                </button>
            </div>
        </div>
    </div>

   <script>
       // Language toggle with translations (Vietnamese is primary)
        let currentLang = 'vi';

        const translations = {
            vi: {
                langBtn: 'En',
                subtitle: 'Thông tin Kinh tế',
                navDataPortal: 'Dữ Liệu Kinh Tế Mở',
                nav1sMarketPortal: 'Thời báo 1 giây',
                navDownloadApi: 'Download & API',
                navDownloadApiMeta: 'Tải dữ liệu & API access',
                navAboutTerms: 'Giới thiệu Viet Dataverse',
                navAboutTermsMeta: 'Về dự án & Điều khoản',
                mainTitle: 'Dữ Liệu Kinh Tế Mở',
                mainSubtitle: '<strong>Tải lịch sử giá vàng</strong> trong nước từ 2015 miễn phí. <strong>Download Vietnam historical gold price data</strong>, giá bạc, lãi suất liên ngân hàng. API & CSV export hoàn toàn miễn phí cho phân tích và nghiên cứu kinh tế.',
                sectionTitle: 'Dữ Liệu Kinh Tế Mở',
                sectionSubtitle: 'Bộ dữ liệu kinh tế vĩ mô Việt Nam chất lượng cao công khai và truy cập miễn phí cho mục đích nghiên cứu. Chi tiết về schemas và parameters tại',
                goldChart: 'Lịch Sử Giá Vàng Trong Nước',
                silverChart: 'Lịch Sử Giá Bạc (Phú Quý)',
                sbvChart: 'Lịch Sử Lãi Suất Liên Ngân Hàng',
                tdChart: 'Lịch Sử Lãi Suất Gửi Tiết Kiệm',
                globalChart: 'Xu Hướng Thị Trường Toàn Cầu (Vàng, Bạc, NASDAQ)',
                downloadTitle: 'Tải Dữ liệu Lịch Sử',
                downloadSubtitle: 'Tải dữ liệu lịch sử giá vàng trong nước, giá bạc, lãi suất ngân hàng miễn phí. Download Vietnam historical gold price từ 2015 đến nay hoặc truy cập qua RESTful API.',
                goldDatasetTitle: 'Tải Lịch Sử Giá Vàng',
                goldDatasetDesc: 'Tải lịch sử giá vàng trong nước. Download Vietnam historical gold price miễn phí với giá mua/bán cập nhật 2 lần mỗi ngày từ nguồn uy tín.',
                silverDatasetTitle: 'Giá Bạc Phú Quý',
                silverDatasetDesc: 'Giá Bạc tại thị trường Hà Nội (Phú Quý), dữ liệu lịch sử từ 2015. Cập nhật hàng ngày giá mua và bán từ nhà phân phối bạc uy tín.',
                sbvDatasetTitle: 'Lãi Suất Liên Ngân Hàng SBV',
                sbvDatasetDesc: 'Lãi suất liên ngân hàng VND (qua đêm, 1 tuần, 2 tuần, 1-9 tháng) công bố bởi Ngân hàng Nhà nước Việt Nam.',
                tdDatasetTitle: 'Lãi Suất Gửi Tiết Kiệm',
                apiBtn: 'Đăng nhập'
            },
            en: {
                langBtn: 'Vie',
                subtitle: 'Economic Intelligence',
                navDataPortal: 'Open Economic Data',
                nav1sMarketPortal: 'Thời báo 1 giây',
                navDownloadApi: 'Download & API',
                navDownloadApiMeta: 'Download data & API access',
                navAboutTerms: 'About & Terms',
                navAboutTermsMeta: 'About project & Terms',
                mainTitle: 'Open Economic Data',
                mainSubtitle: '<strong>Download Vietnam historical gold price data</strong> (SJC, DOJI, PNJ) from 2015 for free. Access silver prices, SBV interest rates updated twice daily. Free API & CSV export for economic research and analysis.',
                sectionTitle: 'Open Economic Data',
                sectionSubtitle: 'Transparent, high-quality Vietnamese macroeconomic datasets for research and analysis. All data sources are publicly documented and freely accessible. More details about parameters with',
                goldChart: 'Gold Price History (Vietnam)',
                silverChart: 'Silver Price History (Vietnam)',
                sbvChart: 'SBV Interbank Rates History',
                tdChart: 'Commercial Banks Term Deposit History',
                globalChart: 'Global Market Trends (Gold, Silver, NASDAQ)',
                downloadTitle: 'Download Vietnam Historical Index',
                downloadSubtitle: 'Download historical gold price data (SJC, DOJI, PNJ), silver prices, bank interest rates for free. Access Vietnam gold price data from 2015 onwards via RESTful API.',
                goldDatasetTitle: 'Vietnam Historical Gold Price',
                goldDatasetDesc: 'Download Vietnam historical gold price data (SJC, DOJI, PNJ 24K) from 2015 to present for free. Buy/sell prices updated twice daily from reliable sources.',
                silverDatasetTitle: 'Silver Price (Phu Quy)',
                silverDatasetDesc: 'Spot silver prices (Phu Quy), historical data from 2015. Daily buy/sell prices from trusted silver distributors.',
                sbvDatasetTitle: 'SBV Interbank Rates',
                sbvDatasetDesc: 'VND interbank interest rates (overnight, 1 week, 2 weeks, 1-9 months) published by State Bank of Vietnam.',
                tdDatasetTitle: 'Term Deposit Rates',
                apiBtn: 'Login'
            }
        };

        function updateLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];

            // Update button - Header
            document.getElementById('lang-text').textContent = t.langBtn;

            // Update button - Sidebar
            const sidebarLangText = document.getElementById('sidebar-lang-text');
            if (sidebarLangText) {
                sidebarLangText.textContent = t.langBtn;
            }
            document.querySelector('.brand-subtitle').textContent = t.subtitle;

            // Update navigation
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                if (link.getAttribute('data-tab') === 'data-portal') {
                    link.querySelector('h4').textContent = t.navDataPortal;
                } else if (link.getAttribute('data-tab') === '1smarket-portal') {
                    link.querySelector('h4').textContent = t.nav1sMarketPortal;
                    const meta = link.querySelector('.nav-meta');
                    if (meta) meta.textContent = t.nav1sMarketPortal;
                } else if (link.getAttribute('data-tab') === 'download-api') {
                    link.querySelector('h4').textContent = t.navDownloadApi;
                    const meta = link.querySelector('.nav-meta');
                    if (meta) meta.textContent = t.navDownloadApiMeta;
                }
            });

            // Update main title & subtitle (SEO optimized)
            const mainSection = document.querySelector('#data-portal .section-header');
            if (mainSection) {
                const mainTitle = mainSection.querySelector('.section-title');
                const mainSubtitle = mainSection.querySelector('.section-subtitle');
                if (mainTitle) mainTitle.textContent = t.mainTitle;
                if (mainSubtitle) {
                    // Remove <strong> tags and set text content
                    mainSubtitle.innerHTML = t.mainSubtitle;
                }
            }

            // Update download section
            const downloadSection = document.querySelector('#download-api .section-header');
            if (downloadSection) {
                const dlTitle = downloadSection.querySelector('.section-title');
                const dlSubtitle = downloadSection.querySelector('.section-subtitle');
                if (dlTitle) dlTitle.textContent = t.downloadTitle;
                if (dlSubtitle) dlSubtitle.innerHTML = t.downloadSubtitle;
            }

            // Update dataset cards
            const datasetCards = document.querySelectorAll('.dataset-card');
            if (datasetCards[0]) {
                const h3 = datasetCards[0].querySelector('h3');
                const desc = datasetCards[0].querySelector('.dataset-desc');
                if (h3) h3.textContent = t.goldDatasetTitle;
                if (desc) desc.innerHTML = t.goldDatasetDesc;
            }
            if (datasetCards[1]) {
                const h3 = datasetCards[1].querySelector('h3');
                const desc = datasetCards[1].querySelector('.dataset-desc');
                if (h3) h3.textContent = t.silverDatasetTitle;
                if (desc) desc.innerHTML = t.silverDatasetDesc;
            }
            if (datasetCards[2]) {
                const h3 = datasetCards[2].querySelector('h3');
                const desc = datasetCards[2].querySelector('.dataset-desc');
                if (h3) h3.textContent = t.sbvDatasetTitle;
                if (desc) desc.innerHTML = t.sbvDatasetDesc;
            }
            if (datasetCards[3]) {
                const h3 = datasetCards[3].querySelector('h3');
                const desc = datasetCards[3].querySelector('.dataset-desc');
                if (h3) h3.textContent = t.tdDatasetTitle;
                if (desc) desc.innerHTML = t.tdDatasetDesc;
            }

            // Update charts
            const chartTitles = document.querySelectorAll('.chart-title');
            if (chartTitles[0]) chartTitles[0].textContent = t.goldChart;
            if (chartTitles[1]) chartTitles[1].textContent = t.silverChart;
            if (chartTitles[2]) chartTitles[2].textContent = t.tdChart;
            if (chartTitles[3]) chartTitles[3].textContent = t.sbvChart;
            if (chartTitles[4]) chartTitles[4].textContent = t.globalChart;

            // Update API button
            document.querySelector('.header-btn.primary span').textContent = t.apiBtn;

            // Set HTML lang and visual feedback
            document.documentElement.lang = lang;
            document.getElementById('lang-toggle').style.borderColor =
                lang === 'vi' ? 'var(--gold-primary)' : 'var(--silver)';
        }

        // Check authentication status and update UI
        function checkAuthenticationStatus() {
            const token = localStorage.getItem('auth_token');
            const userEmail = localStorage.getItem('user_email');

            const userInfo = document.getElementById('user-info');
            const loginLink = document.getElementById('login-link');
            const logoutBtn = document.getElementById('logout-btn');
            const userEmailElement = document.getElementById('user-email');

            // Sidebar elements
            const sidebarUserInfo = document.getElementById('sidebar-user-info');
            const sidebarLoginLink = document.getElementById('sidebar-login-link');
            const sidebarLogoutBtn = document.getElementById('sidebar-logout-btn');
            const sidebarUserEmail = document.getElementById('sidebar-user-email');

            if (token && userEmail) {
                // User is logged in - Header
                userInfo.style.display = 'flex';
                loginLink.style.display = 'none';
                logoutBtn.style.display = 'block';
                if (userEmailElement) {
                    userEmailElement.textContent = userEmail;
                }

                // User is logged in - Sidebar
                if (sidebarUserInfo) sidebarUserInfo.style.display = 'block';
                if (sidebarLoginLink) sidebarLoginLink.style.display = 'none';
                if (sidebarLogoutBtn) sidebarLogoutBtn.style.display = 'block';
                if (sidebarUserEmail) sidebarUserEmail.textContent = userEmail;
            } else {
                // User is not logged in - Header
                userInfo.style.display = 'none';
                loginLink.style.display = 'block';
                logoutBtn.style.display = 'none';

                // User is not logged in - Sidebar
                if (sidebarUserInfo) sidebarUserInfo.style.display = 'none';
                if (sidebarLoginLink) sidebarLoginLink.style.display = 'block';
                if (sidebarLogoutBtn) sidebarLogoutBtn.style.display = 'none';
            }
        }
/* =========================================================
   GLOBAL CONFIG (SAFE – NO DUPLICATE)
========================================================= */
(function () {
    window.APP_CONFIG = window.APP_CONFIG || {};
    window.APP_CONFIG.API_BASE_URL =
        location.hostname === 'localhost' || location.hostname === '127.0.0.1'
            ? 'http://127.0.0.1:8000/api/v1'
            : 'https://api.vietdataverse.online/api/v1';
})();

/* =========================================================
   DOM READY
========================================================= */
document.addEventListener('DOMContentLoaded', async () => {
    initHeaderActions();
    initMobileMenu();
    initSidebarTabs();
    initChartTabs();
    initFilterButtons();
    initNotifications();

    // Initialize Auth0 and check authentication status
    await initAuth0AndUpdateUI();
});

/* =========================================================
   AUTH0 INITIALIZATION & UI UPDATE
========================================================= */
async function initAuth0AndUpdateUI() {
    try {
        // Initialize Auth0
        await initAuth0();

        // Check if user is authenticated
        const authenticated = await isAuthenticated();

        if (authenticated) {
            // Get user info from Auth0
            const user = await getUser();

            // Sync user with backend DB by calling /me endpoint
            try {
                const token = await getToken();
                const apiBase = window.APP_CONFIG.API_BASE_URL;
                const response = await fetch(`${apiBase}/me`, {
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (response.ok) {
                    const dbUser = await response.json();
                    console.log('User synced with backend:', dbUser);
                } else {
                    console.warn('Failed to sync user with backend:', response.status);
                }
            } catch (err) {
                console.error('Error syncing user with backend:', err);
            }

            // Update UI to show logged-in state
            const loginLink = document.getElementById('login-link');
            const userInfo = document.getElementById('user-info');
            const userEmail = document.getElementById('user-email');
            const logoutBtn = document.getElementById('logout-btn');

            // Header
            if (loginLink) loginLink.style.display = 'none';
            if (userInfo) userInfo.style.display = 'block';
            if (userEmail) userEmail.textContent = user.email || user.name || 'User';
            if (logoutBtn) {
                logoutBtn.style.display = 'block';
                logoutBtn.addEventListener('click', () => {
                    logout();
                });
            }

            // Sidebar
            const sidebarLoginLink = document.getElementById('sidebar-login-link');
            const sidebarUserInfo = document.getElementById('sidebar-user-info');
            const sidebarUserEmail = document.getElementById('sidebar-user-email');
            const sidebarLogoutBtn = document.getElementById('sidebar-logout-btn');

            if (sidebarLoginLink) sidebarLoginLink.style.display = 'none';
            if (sidebarUserInfo) sidebarUserInfo.style.display = 'block';
            if (sidebarUserEmail) sidebarUserEmail.textContent = user.email || user.name || 'User';
            if (sidebarLogoutBtn) {
                sidebarLogoutBtn.style.display = 'block';
                sidebarLogoutBtn.addEventListener('click', () => {
                    logout();
                });
            }
        }
    } catch (err) {
        console.error('Auth0 initialization failed:', err);
    }
}

/* =========================================================
   HEADER ACTIONS: LANGUAGE + LOGIN
========================================================= */
function initHeaderActions() {
    const langBtn = document.getElementById('lang-toggle');
    const sidebarLangBtn = document.getElementById('sidebar-lang-toggle');

    /* ---------- LANGUAGE (ENG / VIE) ---------- */
    const savedLang = localStorage.getItem('lang') || 'vi';
    updateLanguage(savedLang);

    if (langBtn) {
        langBtn.addEventListener('click', () => {
            const current = document.documentElement.lang || 'vi';
            const next = current === 'vi' ? 'en' : 'vi';
            updateLanguage(next);
        });
    }
    if (sidebarLangBtn) {
        sidebarLangBtn.addEventListener('click', () => {
            const current = document.documentElement.lang || 'vi';
            const next = current === 'vi' ? 'en' : 'vi';
            updateLanguage(next);
        });
    }

    /* ---------- LOGIN (notification modal) ---------- */
    const loginBtn = document.getElementById('login-btn');
    if (loginBtn) {
        loginBtn.addEventListener('click', () => {
            // Close notification overlay first
            const overlay = document.getElementById('notification-overlay');
            if (overlay) overlay.classList.remove('active');
            // Use Auth0 login
            if (typeof login === 'function') login();
        });
    }
}

/* =========================================================
   LANGUAGE HANDLER (UI-LEVEL, STABLE)
========================================================= */
function setLanguage(lang) {
    document.documentElement.lang = lang;
    localStorage.setItem('lang', lang);

    const label = lang === 'vi' ? 'EN / VIE' : 'VIE / EN';

    // Update header lang button
    const langText = document.getElementById('lang-text');
    if (langText) langText.textContent = label;

    // Update sidebar lang button
    const sidebarText = document.getElementById('sidebar-lang-text');
    if (sidebarText) sidebarText.textContent = label;

    document.body.setAttribute('data-lang', lang);
}

/* =========================================================
   MOBILE MENU
========================================================= */
function initMobileMenu() {
    const toggle = document.getElementById('mobile-menu-toggle');
    const sidebar = document.querySelector('.sidebar');
    const overlay = document.getElementById('mobile-overlay');

    if (!toggle || !sidebar || !overlay) return;

    toggle.addEventListener('click', () => {
        sidebar.classList.toggle('active');
        overlay.classList.toggle('active');
    });

    overlay.addEventListener('click', () => {
        sidebar.classList.remove('active');
        overlay.classList.remove('active');
    });
}

/* =========================================================
   SIDEBAR TABS (main-level only)
========================================================= */
function initSidebarTabs() {
    document.querySelectorAll('.nav-link[data-tab]').forEach(link => {
        link.addEventListener('click', () => {
            const tabId = link.dataset.tab;

            // Only toggle main-level nav-links
            document.querySelectorAll('.nav-link[data-tab]').forEach(l => l.classList.remove('active'));
            link.classList.add('active');

            // Only toggle top-level tab-content (direct children of .main-content)
            document.querySelectorAll('.main-content > .tab-content').forEach(c => c.classList.remove('active'));
            const target = document.getElementById(tabId);
            if (target) target.classList.add('active');

            // If switching to data-portal, restore the inner chart tab
            if (tabId === 'data-portal') {
                const activeChartTab = document.querySelector('.chart-tab-btn.active');
                if (activeChartTab) {
                    const innerTabId = activeChartTab.dataset.tab;
                    const innerTarget = document.getElementById(innerTabId);
                    if (innerTarget) innerTarget.classList.add('active');
                }
            }

            // Close mobile sidebar
            const sidebar = document.querySelector('.sidebar');
            const mobileOverlay = document.getElementById('mobile-overlay');
            if (sidebar) sidebar.classList.remove('active');
            if (mobileOverlay) mobileOverlay.classList.remove('active');
        });
    });
}

/* =========================================================
   CHART SUB-TABS (Vang & Bac / Tien te VN / Quoc te)
   WITH LAZY LOADING
========================================================= */
function initChartTabs() {
    document.querySelectorAll('.chart-tab-btn[data-tab]').forEach(btn => {
        btn.addEventListener('click', () => {
            const tabId = btn.dataset.tab;

            // Toggle button active states
            document.querySelectorAll('.chart-tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            // Toggle inner tab-contents within charts-section
            const chartsSection = btn.closest('.charts-section');
            if (chartsSection) {
                chartsSection.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            }
            const target = document.getElementById(tabId);
            if (target) target.classList.add('active');

            // Lazy load charts when tab is clicked for the first time
            loadChartsForTab(tabId);
        });
    });

    // Load the first tab (gold & silver) immediately on page load
    loadChartsForTab('tab-gold-silver');
}

/* =========================================================
   LAZY LOAD CHARTS FOR A SPECIFIC TAB
========================================================= */
function loadChartsForTab(tabId) {
    // Skip if already loaded
    if (loadedTabs[tabId]) {
        return;
    }

    loadedTabs[tabId] = true;

    // Load charts based on tab ID
    if (tabId === 'tab-gold-silver') {
        // Load gold and silver charts with default period (1 month)
        const goldType = document.getElementById('goldTypeSelect')?.value || 'DOJI HN';
        loadChartData('gold', '1m', goldType);
        loadChartData('silver', '1m');
    } else if (tabId === 'tab-currency') {
        // Load term deposit and SBV rate charts
        const bankCode = document.getElementById('bankTypeSelect')?.value || 'ACB';
        loadChartData('td', '1y', null, bankCode);
        loadChartData('sbv', '1m');
    } else if (tabId === 'tab-global') {
        // Load global markets chart
        loadChartData('global', '1m');
    }
}

/* =========================================================
   FILTER BUTTONS & DROPDOWNS
========================================================= */
function initFilterButtons() {
    // Period filter buttons
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const chart = btn.dataset.chart;
            const period = btn.dataset.period;

            // Update active state
            btn.parentElement
                ?.querySelectorAll('.filter-btn')
                .forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            // Get additional parameters
            let goldType = null;
            let bankCode = null;

            if (chart === 'gold') {
                goldType = document.getElementById('goldTypeSelect')?.value || 'DOJI HN';
            } else if (chart === 'td') {
                bankCode = document.getElementById('bankTypeSelect')?.value || 'ACB';
            }

            // Load chart data with updated period
            loadChartData(chart, period, goldType, bankCode);
        });
    });

    // Gold type selector
    const goldTypeSelect = document.getElementById('goldTypeSelect');
    if (goldTypeSelect) {
        goldTypeSelect.addEventListener('change', (e) => {
            const goldType = e.target.value;
            // Get current active period
            const activePeriodBtn = document.querySelector('.filter-btn[data-chart="gold"].active');
            const period = activePeriodBtn?.dataset.period || '1m';
            // Reload gold chart with new type
            loadChartData('gold', period, goldType);
        });
    }

    // Bank type selector
    const bankTypeSelect = document.getElementById('bankTypeSelect');
    if (bankTypeSelect) {
        bankTypeSelect.addEventListener('change', (e) => {
            const bankCode = e.target.value;
            // Get current active period
            const activePeriodBtn = document.querySelector('.filter-btn[data-chart="td"].active');
            const period = activePeriodBtn?.dataset.period || '1y';
            // Reload TD chart with new bank
            loadChartData('td', period, null, bankCode);
        });
    }
}

/* =========================================================
   NOTIFICATION OVERLAYS
========================================================= */
function initNotifications() {
    // Download notification - cancel
    const cancelBtn = document.getElementById('cancel-btn');
    if (cancelBtn) {
        cancelBtn.addEventListener('click', () => {
            const overlay = document.getElementById('notification-overlay');
            if (overlay) overlay.classList.remove('active');
        });
    }

    // API notification - cancel
    const apiCancelBtn = document.getElementById('api-cancel-btn');
    if (apiCancelBtn) {
        apiCancelBtn.addEventListener('click', () => {
            const overlay = document.getElementById('api-notification-overlay');
            if (overlay) overlay.classList.remove('active');
        });
    }

    // API notification - signup
    const apiSignupBtn = document.getElementById('api-signup-btn');
    if (apiSignupBtn) {
        apiSignupBtn.addEventListener('click', () => {
            const overlay = document.getElementById('api-notification-overlay');
            if (overlay) overlay.classList.remove('active');
            if (typeof signup === 'function') signup();
        });
    }

    // Download buttons -> show login notification if not authenticated, or trigger download
    document.querySelectorAll('[data-download]').forEach(btn => {
        btn.addEventListener('click', async () => {
            const authed = typeof isAuthenticated === 'function' && await isAuthenticated();
            if (!authed) {
                const overlay = document.getElementById('notification-overlay');
                if (overlay) overlay.classList.add('active');
                return;
            }

            // User is authenticated - trigger actual download
            const dataType = btn.dataset.download;
            await downloadData(dataType);
        });
    });

    // API buttons -> check authentication status
    document.querySelectorAll('[data-api]').forEach(btn => {
        btn.addEventListener('click', async () => {
            const authed = typeof isAuthenticated === 'function' && await isAuthenticated();
            const overlay = document.getElementById('api-notification-overlay');
            const signupBtn = document.getElementById('api-signup-btn');
            const guestMessage = document.getElementById('api-message');
            const loggedInMessage = document.getElementById('api-message-logged-in');

            if (authed) {
                // User is logged in - show logged-in message, hide signup button
                if (signupBtn) signupBtn.style.display = 'none';
                if (guestMessage) guestMessage.style.display = 'none';
                if (loggedInMessage) loggedInMessage.style.display = 'block';
            } else {
                // User is not logged in - show guest message and signup button
                if (signupBtn) signupBtn.style.display = 'inline-flex';
                if (guestMessage) guestMessage.style.display = 'block';
                if (loggedInMessage) loggedInMessage.style.display = 'none';
            }

            if (overlay) overlay.classList.add('active');
        });
    });
}

/* =========================================================
   DOWNLOAD DATA FUNCTIONALITY
========================================================= */
async function downloadData(dataType) {
    const base = window.APP_CONFIG.API_BASE_URL;

    // Map data types to API endpoints
    const endpointMap = {
        'gold': 'gold?period=all',
        'silver': 'silver?period=all',
        'sbv': 'sbv-interbank?period=all'
    };

    const endpoint = endpointMap[dataType];
    if (!endpoint) {
        console.error('Unknown data type:', dataType);
        return;
    }

    try {
        // Show loading state (optional - could add a loading indicator)
        console.log(`Downloading ${dataType} data...`);

        // Fetch data from API
        const response = await fetch(`${base}/${endpoint}`);
        if (!response.ok) throw new Error('Failed to fetch data');

        const jsonData = await response.json();

        if (!jsonData.success || !jsonData.data) {
            throw new Error('Invalid data format');
        }

        // Convert to CSV
        let csvContent = '';
        const data = jsonData.data;

        if (dataType === 'gold' || dataType === 'silver') {
            // CSV header
            csvContent = 'Date,Buy Price,Sell Price\n';

            // CSV rows
            for (let i = 0; i < data.dates.length; i++) {
                csvContent += `${data.dates[i]},${data.buy_prices[i]},${data.sell_prices[i]}\n`;
            }
        } else if (dataType === 'sbv') {
            // CSV header
            csvContent = 'Date,Overnight,1 Month,3 Months,Rediscount,Refinancing\n';

            // CSV rows
            for (let i = 0; i < data.dates.length; i++) {
                csvContent += `${data.dates[i]},${data.overnight[i]},${data.month_1[i]},${data.month_3[i]},${data.rediscount[i]},${data.refinancing[i]}\n`;
            }
        }

        // Create blob and trigger download
        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
        const link = document.createElement('a');
        const url = URL.createObjectURL(blob);

        link.setAttribute('href', url);
        link.setAttribute('download', `vietdataverse_${dataType}_${new Date().toISOString().split('T')[0]}.csv`);
        link.style.visibility = 'hidden';

        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);

        console.log(`Downloaded ${dataType} data successfully`);

    } catch (error) {
        console.error('Download failed:', error);
        alert('Download failed. Please try again.');
    }
}

/* =========================================================
   CHART RENDERING SYSTEM WITH LAZY LOADING & CACHING
========================================================= */

// Store Chart.js instances
const chartInstances = {
    gold: null,
    silver: null,
    td: null,
    sbv: null,
    global: null
};

// Cache for loaded data (avoid redundant API calls)
const chartCache = {};

// Track which tabs have been loaded
const loadedTabs = {
    'tab-gold-silver': false,
    'tab-currency': false,
    'tab-global': false
};

// Map chart types to their API endpoints
const CHART_API_ENDPOINTS = {
    gold: 'gold',
    silver: 'silver',
    td: 'termdepo',
    sbv: 'sbv-interbank',
    global: 'global-macro'
};

/* =========================================================
   FETCH CHART DATA WITH CACHING
========================================================= */
async function loadChartData(chartType, period = '1m', goldType = 'DOJI HN', bankCode = 'ACB') {
    const base = window.APP_CONFIG.API_BASE_URL;
    if (!base || !chartType) return;

    const endpoint = CHART_API_ENDPOINTS[chartType];
    if (!endpoint) {
        console.error('Unknown chart type:', chartType);
        return;
    }

    // Build cache key
    const cacheKey = `${chartType}-${period}-${goldType}-${bankCode}`;

    // Check cache first
    if (chartCache[cacheKey]) {
        console.log(`[${chartType}] Using cached data`);
        renderChart(chartType, chartCache[cacheKey], period);
        return;
    }

    // Show loading skeleton
    const loadingEl = document.getElementById(`${chartType}Loading`);
    if (loadingEl) loadingEl.style.display = 'flex';

    try {
        // Build API URL with parameters
        let apiUrl = `${base}/${endpoint}?period=${period}`;
        if (chartType === 'gold' && goldType) {
            apiUrl += `&type=${encodeURIComponent(goldType)}`;
        }
        if (chartType === 'td' && bankCode) {
            apiUrl += `&bank=${encodeURIComponent(bankCode)}`;
        }

        const res = await fetch(apiUrl);
        if (!res.ok) throw new Error(`API error: ${res.status}`);

        const data = await res.json();
        console.log(`[${chartType}] Data loaded:`, data);

        // Store in cache
        chartCache[cacheKey] = data;

        // Render chart
        renderChart(chartType, data, period);

    } catch (e) {
        console.error(`[${chartType}] Fetch failed:`, e);
        // Show error message
        if (loadingEl) {
            loadingEl.innerHTML = '<p style="color: #EF5350; text-align: center;">Failed to load data. Please try again.</p>';
        }
    } finally {
        // Hide loading skeleton after a short delay
        setTimeout(() => {
            if (loadingEl) loadingEl.style.display = 'none';
        }, 500);
    }
}

/* =========================================================
   RENDER CHART WITH CHART.JS
========================================================= */
function renderChart(chartType, apiData, period) {
    const canvas = document.getElementById(`${chartType}Chart`);
    if (!canvas) {
        console.error(`Canvas not found for ${chartType}Chart`);
        return;
    }

    const ctx = canvas.getContext('2d');

    // Destroy existing chart instance if it exists
    if (chartInstances[chartType]) {
        chartInstances[chartType].destroy();
    }

    // Parse data based on chart type
    let chartData;
    if (chartType === 'gold' || chartType === 'silver') {
        chartData = parseGoldSilverData(apiData, chartType);
    } else if (chartType === 'td') {
        chartData = parseTDData(apiData);
    } else if (chartType === 'sbv') {
        chartData = parseSBVData(apiData);
    } else if (chartType === 'global') {
        chartData = parseGlobalData(apiData);
    }

    if (!chartData) {
        console.error(`Failed to parse data for ${chartType}`);
        return;
    }

    // Create new chart
    chartInstances[chartType] = new Chart(ctx, chartData);
}

/* =========================================================
   DATA PARSERS FOR DIFFERENT CHART TYPES
========================================================= */
function parseGoldSilverData(apiData, chartType) {
    // API format: { success: true, data: { dates: [...], buy_prices: [...], sell_prices: [...] } }
    if (!apiData || !apiData.data || !apiData.data.dates) {
        console.warn(`No data for ${chartType}`);
        return null;
    }

    const dates = apiData.data.dates;
    const buyPrices = apiData.data.buy_prices;
    const sellPrices = apiData.data.sell_prices;

    const color = chartType === 'gold' ? '#C9A55B' : '#A0A0A0';

    return {
        type: 'line',
        data: {
            labels: dates,
            datasets: [
                {
                    label: 'Buy Price (Mua vào)',
                    data: buyPrices,
                    borderColor: color,
                    backgroundColor: color + '20',
                    borderWidth: 2,
                    tension: 0.4,
                    fill: true
                },
                {
                    label: 'Sell Price (Bán ra)',
                    data: sellPrices,
                    borderColor: color + 'CC',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    tension: 0.4,
                    borderDash: [5, 5]
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: true,
                    labels: { color: '#A0A0A0' }
                },
                tooltip: {
                    mode: 'index',
                    intersect: false
                }
            },
            scales: {
                x: {
                    ticks: { color: '#666', maxRotation: 45 },
                    grid: { color: '#2A2A2A' }
                },
                y: {
                    ticks: { color: '#666' },
                    grid: { color: '#2A2A2A' }
                }
            }
        }
    };
}

function parseTDData(apiData) {
    // API format: { success: true, data: { dates: [...], term_1m: [...], term_3m: [...], ... } }
    if (!apiData || !apiData.data || !apiData.data.dates) {
        return null;
    }

    const dates = apiData.data.dates;
    const rate1m = apiData.data.term_1m;
    const rate3m = apiData.data.term_3m;
    const rate6m = apiData.data.term_6m;
    const rate12m = apiData.data.term_12m;

    return {
        type: 'line',
        data: {
            labels: dates,
            datasets: [
                {
                    label: '1 Month',
                    data: rate1m,
                    borderColor: '#42A5F5',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    tension: 0.4
                },
                {
                    label: '3 Months',
                    data: rate3m,
                    borderColor: '#66BB6A',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    tension: 0.4
                },
                {
                    label: '6 Months',
                    data: rate6m,
                    borderColor: '#FFA726',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    tension: 0.4
                },
                {
                    label: '12 Months',
                    data: rate12m,
                    borderColor: '#EF5350',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    tension: 0.4
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: true,
                    labels: { color: '#A0A0A0' }
                },
                tooltip: {
                    mode: 'index',
                    intersect: false
                }
            },
            scales: {
                x: {
                    ticks: { color: '#666', maxRotation: 45 },
                    grid: { color: '#2A2A2A' }
                },
                y: {
                    ticks: {
                        color: '#666',
                        callback: function(value) {
                            return value + '%';
                        }
                    },
                    grid: { color: '#2A2A2A' }
                }
            }
        }
    };
}

function parseSBVData(apiData) {
    // API format: { success: true, data: { dates: [...], overnight: [...], month_1: [...], month_3: [...] } }
    if (!apiData || !apiData.data || !apiData.data.dates) {
        return null;
    }

    const dates = apiData.data.dates;
    const overnight = apiData.data.overnight;
    const onweek = apiData.data.month_1;  // Using month_1 as "1 week" equivalent
    const twoweek = apiData.data.month_3;  // Using month_3 as "2 weeks" equivalent

    return {
        type: 'line',
        data: {
            labels: dates,
            datasets: [
                {
                    label: 'Overnight',
                    data: overnight,
                    borderColor: '#C9A55B',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    tension: 0.4
                },
                {
                    label: '1 Week',
                    data: onweek,
                    borderColor: '#42A5F5',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    tension: 0.4
                },
                {
                    label: '2 Weeks',
                    data: twoweek,
                    borderColor: '#66BB6A',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    tension: 0.4
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: true,
                    labels: { color: '#A0A0A0' }
                },
                tooltip: {
                    mode: 'index',
                    intersect: false
                }
            },
            scales: {
                x: {
                    ticks: { color: '#666', maxRotation: 45 },
                    grid: { color: '#2A2A2A' }
                },
                y: {
                    ticks: {
                        color: '#666',
                        callback: function(value) {
                            return value + '%';
                        }
                    },
                    grid: { color: '#2A2A2A' }
                }
            }
        }
    };
}

function parseGlobalData(apiData) {
    // API format: { success: true, data: { dates: [...], gold_prices: [...], silver_prices: [...], nasdaq_prices: [...] } }
    if (!apiData || !apiData.data || !apiData.data.dates) {
        return null;
    }

    const dates = apiData.data.dates;
    const goldFuture = apiData.data.gold_prices;
    const silverSpot = apiData.data.silver_prices;
    const nasdaq = apiData.data.nasdaq_prices;

    return {
        type: 'line',
        data: {
            labels: dates,
            datasets: [
                {
                    label: 'Gold Future ($/oz)',
                    data: goldFuture,
                    borderColor: '#C9A55B',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    tension: 0.4,
                    yAxisID: 'y'
                },
                {
                    label: 'Silver Spot ($/oz)',
                    data: silverSpot,
                    borderColor: '#A0A0A0',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    tension: 0.4,
                    yAxisID: 'y1'
                },
                {
                    label: 'NASDAQ',
                    data: nasdaq,
                    borderColor: '#42A5F5',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    tension: 0.4,
                    yAxisID: 'y2'
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            interaction: {
                mode: 'index',
                intersect: false
            },
            plugins: {
                legend: {
                    display: true,
                    labels: { color: '#A0A0A0' }
                },
                tooltip: {
                    mode: 'index',
                    intersect: false
                }
            },
            scales: {
                x: {
                    ticks: { color: '#666', maxRotation: 45 },
                    grid: { color: '#2A2A2A' }
                },
                y: {
                    type: 'linear',
                    display: true,
                    position: 'left',
                    ticks: { color: '#C9A55B' },
                    grid: { color: '#2A2A2A' }
                },
                y1: {
                    type: 'linear',
                    display: true,
                    position: 'right',
                    ticks: { color: '#A0A0A0' },
                    grid: { drawOnChartArea: false }
                },
                y2: {
                    type: 'linear',
                    display: false,
                    position: 'right'
                }
            }
        }
    };
}

/* =========================================================
   MARKET PULSE - LOAD & RENDER ARTICLES
========================================================= */
const LABEL_COLORS = {
    VNINDEX: '#4CAF50',
    GOLD: '#C9A55B',
    REAL_ESTATE: '#FF7043',
    BANKING: '#42A5F5',
    FX: '#AB47BC'
};

const LABEL_NAMES_VI = {
    VNINDEX: 'VN-Index',
    GOLD: 'Vang',
    REAL_ESTATE: 'BDS',
    BANKING: 'Ngan hang',
    FX: 'Ngoai hoi'
};

function formatPulseDate(isoStr) {
    if (!isoStr) return '';
    try {
        const d = new Date(isoStr);
        return d.toLocaleDateString('vi-VN', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit' });
    } catch { return isoStr; }
}

function renderMriBadge(mri) {
    if (mri == null) return '';
    const color = mri > 0 ? '#4CAF50' : mri < 0 ? '#EF5350' : '#888';
    const arrow = mri > 0 ? '&#9650;' : mri < 0 ? '&#9660;' : '&#9654;';
    return `<span style="display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:4px;font-size:0.8rem;font-weight:600;color:${color};background:${color}1a;">${arrow} MRI ${mri > 0 ? '+' : ''}${mri}</span>`;
}

function renderPulseArticle(item) {
    const labelColor = LABEL_COLORS[item.label] || '#888';
    return `
    <article class="article-featured" style="margin-bottom:1.5rem;">
        <div class="article-header" style="padding:1.5rem 2rem 1rem;">
            <div style="display:flex;align-items:center;gap:0.75rem;flex-wrap:wrap;margin-bottom:0.75rem;">
                <span class="article-tag" style="border-color:${labelColor}40;color:${labelColor};background:${labelColor}15;margin-bottom:0;">${item.label || 'NEWS'}</span>
                ${renderMriBadge(item.mri)}
            </div>
            <h2 class="article-title" style="font-size:1.5rem;margin-bottom:0.75rem;">
                <a href="${item.url || '#'}" target="_blank" rel="noopener" style="color:inherit;text-decoration:none;">${item.title || 'Untitled'}</a>
            </h2>
            <div class="article-meta">
                <span class="meta-item">${item.source_name || ''}</span>
                <span class="meta-item">${formatPulseDate(item.generated_at)}</span>
            </div>
        </div>
        <div class="article-body" style="padding:1rem 2rem 1.5rem;">
            <div class="article-text">
                <p style="margin:0;">${item.brief_content || ''}</p>
            </div>
        </div>
    </article>`;
}

async function loadMarketPulse() {
    const base = window.APP_CONFIG.API_BASE_URL;
    const container = document.getElementById('market-pulse-articles');
    const loading = document.getElementById('pulseLoading');
    if (!container || !base) return;

    const lang = localStorage.getItem('lang') || 'vi';

    try {
        const res = await fetch(`${base}/market-pulse?lang=${lang}&limit=10`);
        if (!res.ok) throw new Error('API error');
        const json = await res.json();

        if (!json.success || !json.data || json.data.length === 0) {
            container.innerHTML = '<p style="text-align:center;color:var(--text-tertiary);padding:3rem;">Chua co bai viet nao. Du lieu se duoc cap nhat moi 6 gio.</p>';
            return;
        }

        container.innerHTML = json.data.map(renderPulseArticle).join('');
    } catch (e) {
        console.error('Market Pulse fetch failed:', e);
        if (loading) loading.textContent = 'Khong the tai du lieu. Vui long thu lai sau.';
    }
}

// Load market pulse on DOMContentLoaded
document.addEventListener('DOMContentLoaded', loadMarketPulse);
</script>


</body>
</html>